import n,{useState as e,useRef as t,useLayoutEffect as r,useEffect as o,forwardRef as i,useImperativeHandle as c}from"react";var a=function(){return a=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},a.apply(this,arguments)};function l(n,e,t){if(t||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var u=function(n){var o=n.isOpenList,i=n.itemsLength,c=void 0===i?0:i,l=n.execute,u=e({width:"",top:""}),d=u[0],s=u[1],p=e(null),f=p[0],v=p[1],h=t(null),m=t(null),g=t(null);function b(){var n=function(n){var e=n.isOpenList,t=n.fieldRef,r=n.listRef,o=n.initHeightRef,i=n.setParent;function c(n){return null==n?null:n.scrollHeight>n.clientHeight?n:c(n.parentNode)}function a(){return t.current?window.innerHeight-t.current.getBoundingClientRect().bottom-10:0}function l(n,e){var r,o,i=(null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect().top)||0,c=(null===(o=t.current)||void 0===o?void 0:o.getBoundingClientRect().bottom)||0;return e?i-n-10:c+10}if(t.current&&r.current&&e){var u=a(),d=r.current.clientHeight;null===o.current&&(o.current=d);var s=c(t.current);i(s||null);var p=!1;return d>u&&(p=!0),{width:"".concat(t.current.clientWidth,"px"),top:"".concat(l(d,p),"px")}}return{width:"",top:""}}({isOpenList:o,fieldRef:m,listRef:g,initHeightRef:h,setParent:v});s(n)}return r((function(){l&&s((function(n){var e;return m.current&&(e=m.current.offsetWidth.toString()),a(a({},n),{width:e})}))}),[]),r((function(){return l&&f&&m.current&&(f.addEventListener("scroll",b),window.addEventListener("scroll",b)),function(){l&&f&&m.current&&(f.removeEventListener("scroll",b),window.removeEventListener("scroll",b))}}),[f]),r((function(){return l&&(window.addEventListener("resize",b),b()),function(){l&&window.removeEventListener("resize",b)}}),[o,c]),{fieldRef:m,listRef:g,dropdownStyles:d}};function d(n,e,t,r){void 0===t&&(t=[]),void 0===r&&(r=!1);var o=e.toString().toLowerCase().trim();return""===o?[]:n.length<=50||r&&n.length<=100?s(n,o,t):p(n,o,0,n.length-1,t,r)}function s(n,e,t,r){var o=[];function i(n,e){return typeof n===e}for(var c=0,a=n;c<a.length;c++){var l=a[c],u=f(l,t);if(null!==u)if(i(u,"string")&&v(u,e))o.push(l);else if(i(u,"number")&&v(String(u),e))o.push(l);else if(Array.isArray(u)){var d=s(u,e,t);d.length>0&&o.push.apply(o,d)}else if(i(u,"object"))for(var p=0,h=Object.keys(u);p<h.length;p++){var m=h[p];if(!t.includes(m))if(s(Array.isArray(u[m])?u[m]:[u[m]],e,t).length>0){o.push(l);break}}}return o}function p(n,e,t,r,o,i){if(t>r)return[];var c=Math.floor((t+r)/2),a=f(n[c],o),u=[];function d(n){return typeof a===n}if(null!==a)if(d("string")&&v(a,e))u.push(n[c]);else if(d("number")&&v(a,e))u.push(n[c]);else if(Array.isArray(a)){var s=p(a,e,0,a.length-1,o,i);s.length>0&&u.push.apply(u,s)}else if(d("object"))for(var h=0,m=Object.keys(a);h<m.length;h++){var g=m[h];if(i&&Array.isArray(a[g]))break;if(!o.includes(g))if(p(a[g],e,0,0,o,i).length>0){u.push(n[c]);break}}var b=p(n,e,t,c-1,o,i),w=p(n,e,c+1,r,o,i);return l(l(l([],u,!0),b,!0),w,!0)}function f(n,e){for(var t=0,r=Object.keys(n);t<r.length;t++){var o=r[t];if(!e.includes(o))break}return n}function v(n,e){return n.toString().toLowerCase().replaceAll(" ","").includes(e.replaceAll(" ",""))}!function(n,e){void 0===e&&(e={});var t=e.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}(".sc-wrapper {\n  max-width: 100%;\n  display: inline-block;\n}\n.sc-label {\n  font-size: 12px;\n  color: #919191;\n  margin-bottom: 3px;\n}\n.sc-input-form {\n  display: flex;\n  align-items: center;\n}\n.sc-button {\n  border-radius: 5px;\n}\n.sc-input {\n  border-radius: 5px;\n  position: relative;\n}\n.sc-input input {\n  padding-right: 20px;\n}\n.sc-input-clear {\n  position: absolute;\n  right: 3px;\n  top: 50%;\n  transform: translateY(-50%);\n  cursor: pointer;\n  width: 14px;\n  height: 14px;\n  font-size: 12px;\n  line-height: 100%;\n  text-align: center;\n  border: 1px solid #111;\n  border-radius: 100%;\n}\n.sc-input-clear:after {\n  content: 'x';\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.sc-loader {\n  font-size: 12px;\n  color: #919191;\n}\n.sc-dropdown-wrapper {\n  background: #fff;\n  overflow: hidden;\n  position: fixed;\n  right: auto;\n  max-height: 250px;\n  width: 100%;\n  z-index: -9999;\n  opacity: 0;\n  pointer-events: none;\n}\n.sc-dropdown--open {\n  opacity: 1;\n  z-index: 9999;\n  pointer-events: initial;\n}\n.sc-dropdown {\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n  background: #fff;\n  margin: 0;\n  border: 1px solid #111;\n  border-radius: 5px;\n  max-height: 250px;\n  height: 100%;\n  overflow: auto;\n  overscroll-behavior-y: contain;\n  padding: 5px 10px;\n  box-sizing: border-box;\n}\n.sc-dropdown-item {\n  border-bottom: 1px solid #111;\n  padding-bottom: 5px;\n  margin-bottom: 5px;\n  transition: 0.1s;\n  cursor: pointer;\n}\n.sc-dropdown-item:last-child {\n  border-bottom: none;\n  padding-bottom: 0;\n  margin-bottom: 0;\n}\n.sc-dropdown-item:hover {\n  opacity: 0.6;\n}\n.sc-dropdown-item--disabled {\n  pointer-events: none;\n}");var h=i((function(r,i){var l=r.children,s=r.items,p=void 0===s?[]:s,f=r.keyId,v=void 0===f?"":f,h=r.excludesKeys,m=void 0===h?[]:h,g=r.keysShowValue,b=void 0===g?[]:g,w=r.searchByKeyAfterSelect,y=void 0===w?"":w,x=r.separatorValue,S=void 0===x?", ":x,E=r.value,k=void 0===E?"":E,L=r.debounce,C=void 0===L?0:L,N=r.onSearchResults,R=void 0===N?function(){}:N,A=r.onSelect,O=void 0===A?function(){}:A,j=r.onLoad,B=void 0===j?function(){}:j,z=r.onFocus,T=void 0===z?function(){}:z,F=r.onBlur,H=void 0===F?function(){}:F,I=r.onClear,P=void 0===I?function(){}:I,D=r.onlyVertexSearch,V=void 0!==D&&D,W=r.autoSearch,K=void 0!==W&&W,J=r.disabledSelect,M=void 0!==J&&J,Y=r.closeOnSelect,q=void 0!==Y&&Y,G=r.withClear,Q=void 0===G||G,U=r.withBtn,X=void 0===U||U,Z=r.withDropdown,$=void 0===Z||Z,_=r.withLoader,nn=void 0===_||_,en=r.disabled,tn=void 0!==en&&en,rn=r.autoFocus,on=void 0!==rn&&rn,cn=r.changeDropdownPosition,an=void 0===cn||cn,ln=r.placeholder,un=void 0===ln?"text...":ln,dn=r.label,sn=void 0===dn?"Search":dn,pn=r.btnText,fn=void 0===pn?"Search":pn,vn=r.loaderText,hn=void 0===vn?"Loading":vn,mn=r.noResultsText,gn=void 0===mn?"No results:":mn,bn=r.addClasses,wn=void 0===bn?{}:bn,yn=t(null),xn=t(null),Sn=e(k),En=Sn[0],kn=Sn[1],Ln=e(""),Cn=Ln[0],Nn=Ln[1],Rn=e(!1),An=Rn[0],On=Rn[1],jn=e(!0),Bn=jn[0],zn=jn[1],Tn=e(null),Fn=Tn[0],Hn=Tn[1],In=e([]),Pn=In[0],Dn=In[1],Vn=e(null),Wn=Vn[0],Kn=Vn[1];o((function(){yn.current&&on&&yn.current.focus()}),[]);var Jn=u({isOpenList:Bn,itemsLength:Pn.length,execute:$||an}),Mn=Jn.fieldRef,Yn=Jn.listRef,qn=Jn.dropdownStyles;!function(n,e,t){void 0===t&&(t=!0);var r=function(t){n.current&&!n.current.contains(t.target)&&e()};o((function(){return t&&document.addEventListener("click",r),function(){return document.removeEventListener("click",r)}}))}(xn,(function(){return zn(!1)})),c(i,(function(){return{handleItem:function(n,e){l&&n&&$n(n,e)}}}));var Gn=function(n,e){void 0===n&&(n=[]),B&&B(!0),On(!0),Hn(null);var t=d(n.length>0?n:p,e,m,V);0===t.length&&""!==e&&Hn("".concat(gn,' "').concat(e,'"')),setTimeout((function(){B&&B(!1),R&&R(t),Dn(t),On(!1)}),C),Bn||zn(!0)},Qn=function(n,e){var t=n.toString().split(S)[0].replace(S.trim(),"");q&&e?zn(!1):Gn([],t)},Un=function(n){return"object"==typeof n?b.length?b.reduce((function(e,t){return void 0!==n[t]&&""!==n[t]?""===e?n[t].toString():"".concat(e).concat(S).concat(n[t].toString()):e}),""):JSON.stringify(n):n.toString()},Xn=function(){return Cn&&En.trim()!==Cn.trim()?Cn:Wn&&y?Wn[y]:En},Zn=function(n){return 0===Object.keys(wn).length||!wn[n]?"":" ".concat(wn[n])},$n=function(n,e){O&&O(n);var t="";t=e||("object"==typeof n?Un(n):n.toString()),Kn(n),kn(t),Nn(t),Qn(y?n[y]:t,n)},_n=function(){P&&P(),R&&R([]),Hn(null),kn(""),Dn([]),Kn(null)};return o((function(){""!==En.trim()?(En.trim()!==Cn.trim()&&(Kn(null),Nn("")),K&&!Wn&&Qn(Xn())):_n()}),[En,Wn]),n.createElement("div",{className:"sc-wrapper".concat(Zn("wrapper")),ref:xn},sn&&n.createElement("div",{className:"sc-label".concat(Zn("label"))},n.createElement("label",{htmlFor:"searchInput"},sn)),n.createElement("form",{onSubmit:function(n){n.preventDefault(),tn||Qn(Xn())},className:"sc-input-form".concat(Zn("inputForm"))},n.createElement("div",{className:"sc-input".concat(Zn("input")),ref:Mn},n.createElement("input",{type:"text",id:"searchInput",onBlur:function(){H&&H()},onFocus:function(){T&&T(),Bn||zn(!0)},disabled:tn,ref:yn,placeholder:un,value:En,onChange:function(n){return kn(n.target.value)}}),Q&&En&&!tn&&!An&&n.createElement("div",{onClick:_n,className:"sc-input-clear".concat(Zn("clear"))})),!K&&X?n.createElement("button",{"data-testid":"search-button",className:"sc-button".concat(Zn("button")),onClick:function(){return Qn(Xn())},disabled:An||!En||tn},nn&&An?hn:fn):nn&&n.createElement("span",{className:"sc-loader".concat(Zn("loader"))},An&&hn)),$&&n.createElement("div",{className:"sc-dropdown-wrapper".concat(Zn("dropdownWrapper")).concat((Pn.length>0||Fn)&&Bn?" sc-dropdown--open":""),style:a({},qn),ref:Yn},l?n.createElement(n.Fragment,null,l):n.createElement("div",{className:"sc-dropdown".concat(Zn("dropdown"))},Fn||Pn.length>0&&Pn.map((function(e,t){return n.createElement("div",{key:v&&e[v]?e[v]:t+e.toString(),className:"sc-dropdown-item".concat(M?"sc-dropdown-item--disabled":"").concat(Zn("dropdownItem")),onClick:function(){return M?function(){}:$n(e)}},Un(e))})))))}));h.displayName="SearchCrow";export{h as SearchCrow,d as onSearchCrow};
//# sourceMappingURL=index.mjs.map
