"use strict";var e=require("react"),n=function(){return n=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},n.apply(this,arguments)};function t(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}"function"==typeof SuppressedError&&SuppressedError;var r=function(t){var r=t.isOpenList,o=t.itemsLength,i=void 0===o?0:o,c=t.execute,a=e.useState({width:"",top:""}),l=a[0],u=a[1],s=e.useState(null),d=s[0],f=s[1],p=e.useRef(null),v=e.useRef(null),h=e.useRef(null);function m(){var e=function(e){var n=e.isOpenList,t=e.fieldRef,r=e.listRef,o=e.initHeightRef,i=e.setParent;function c(e){return null==e?null:e.scrollHeight>e.clientHeight?e:c(e.parentNode)}function a(){return t.current?window.innerHeight-t.current.getBoundingClientRect().bottom-10:0}function l(e,n){var r,o,i=(null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect().top)||0,c=(null===(o=t.current)||void 0===o?void 0:o.getBoundingClientRect().bottom)||0;return n?i-e-10:c+10}if(t.current&&r.current&&n){var u=a(),s=r.current.clientHeight;null===o.current&&(o.current=s);var d=c(t.current);i(d||null);var f=!1;return s>u&&(f=!0),{width:"".concat(t.current.clientWidth,"px"),top:"".concat(l(s,f),"px")}}return{width:"",top:""}}({isOpenList:r,fieldRef:v,listRef:h,initHeightRef:p,setParent:f});u(e)}return e.useLayoutEffect((function(){c&&u((function(e){var t;return v.current&&(t=v.current.offsetWidth.toString()),n(n({},e),{width:t})}))}),[]),e.useLayoutEffect((function(){return c&&d&&v.current&&(d.addEventListener("scroll",m),window.addEventListener("scroll",m)),function(){c&&d&&v.current&&(d.removeEventListener("scroll",m),window.removeEventListener("scroll",m))}}),[d]),e.useLayoutEffect((function(){return c&&(window.addEventListener("resize",m),m()),function(){c&&window.removeEventListener("resize",m)}}),[r,i]),{fieldRef:v,listRef:h,dropdownStyles:l}};function o(e,n,t,r){void 0===t&&(t=[]),void 0===r&&(r=!1);var o=n.toString().toLowerCase().trim();return""===o?[]:e.length<=50||r&&e.length<=100?i(e,o,t):c(e,o,0,e.length-1,t,r)}function i(e,n,t,r){var o=[];function c(e,n){return typeof e===n}for(var u=0,s=e;u<s.length;u++){var d=s[u],f=a(d,t);if(null!==f)if(c(f,"string")&&l(f,n))o.push(d);else if(c(f,"number")&&l(String(f),n))o.push(d);else if(Array.isArray(f)){var p=i(f,n,t);p.length>0&&o.push.apply(o,p)}else if(c(f,"object"))for(var v=0,h=Object.keys(f);v<h.length;v++){var m=h[v];if(!t.includes(m))if(i(Array.isArray(f[m])?f[m]:[f[m]],n,t).length>0){o.push(d);break}}}return o}function c(e,n,r,o,i,u){if(r>o)return[];var s=Math.floor((r+o)/2),d=a(e[s],i),f=[];function p(e){return typeof d===e}if(null!==d)if(p("string")&&l(d,n))f.push(e[s]);else if(p("number")&&l(d,n))f.push(e[s]);else if(Array.isArray(d)){var v=c(d,n,0,d.length-1,i,u);v.length>0&&f.push.apply(f,v)}else if(p("object"))for(var h=0,m=Object.keys(d);h<m.length;h++){var g=m[h];if(u&&Array.isArray(d[g]))break;if(!i.includes(g))if(c(d[g],n,0,0,i,u).length>0){f.push(e[s]);break}}var b=c(e,n,r,s-1,i,u),w=c(e,n,s+1,o,i,u);return t(t(t([],f,!0),b,!0),w,!0)}function a(e,n){for(var t=0,r=Object.keys(e);t<r.length;t++){var o=r[t];if(!n.includes(o))break}return e}function l(e,n){return e.toString().toLowerCase().replaceAll(" ","").includes(n.replaceAll(" ",""))}!function(e,n){void 0===n&&(n={});var t=n.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".sc-wrapper {\n  max-width: 100%;\n  display: inline-block;\n}\n.sc-label {\n  font-size: 12px;\n  color: #919191;\n  margin-bottom: 3px;\n}\n.sc-input-form {\n  display: flex;\n  align-items: center;\n}\n.sc-button {\n  border-radius: 5px;\n}\n.sc-input {\n  border-radius: 5px;\n  position: relative;\n}\n.sc-input input {\n  padding-right: 20px;\n}\n.sc-input-clear {\n  position: absolute;\n  right: 3px;\n  top: 50%;\n  transform: translateY(-50%);\n  cursor: pointer;\n  width: 14px;\n  height: 14px;\n  font-size: 12px;\n  line-height: 100%;\n  text-align: center;\n  border: 1px solid #111;\n  border-radius: 100%;\n}\n.sc-input-clear:after {\n  content: 'x';\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.sc-loader {\n  font-size: 12px;\n  color: #919191;\n}\n.sc-dropdown-wrapper {\n  background: #fff;\n  overflow: hidden;\n  position: fixed;\n  right: auto;\n  max-height: 250px;\n  width: 100%;\n  z-index: -9999;\n  opacity: 0;\n  pointer-events: none;\n}\n.sc-dropdown--open {\n  opacity: 1;\n  z-index: 9999;\n  pointer-events: initial;\n}\n.sc-dropdown {\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n  background: #fff;\n  margin: 0;\n  border: 1px solid #111;\n  border-radius: 5px;\n  max-height: 250px;\n  height: 100%;\n  overflow: auto;\n  overscroll-behavior-y: contain;\n  padding: 5px 10px;\n  box-sizing: border-box;\n}\n.sc-dropdown-item {\n  border-bottom: 1px solid #111;\n  padding-bottom: 5px;\n  margin-bottom: 5px;\n  transition: 0.1s;\n  cursor: pointer;\n}\n.sc-dropdown-item:last-child {\n  border-bottom: none;\n  padding-bottom: 0;\n  margin-bottom: 0;\n}\n.sc-dropdown-item:hover {\n  opacity: 0.6;\n}\n.sc-dropdown-item--disabled {\n  pointer-events: none;\n}");var u=e.forwardRef((function(t,i){var c=t.children,a=t.items,l=void 0===a?[]:a,u=t.keyId,s=void 0===u?"":u,d=t.excludesKeys,f=void 0===d?[]:d,p=t.keysShowValue,v=void 0===p?[]:p,h=t.searchByKeyAfterSelect,m=void 0===h?"":h,g=t.separatorValue,b=void 0===g?", ":g,w=t.value,y=void 0===w?"":w,x=t.debounce,S=void 0===x?0:x,E=t.onSearchResults,L=void 0===E?function(){}:E,R=t.onSelect,k=void 0===R?function(){}:R,C=t.onLoad,N=void 0===C?function(){}:C,A=t.onFocus,O=void 0===A?function(){}:A,j=t.onBlur,B=void 0===j?function(){}:j,z=t.onClear,H=void 0===z?function(){}:z,T=t.onlyVertexSearch,F=void 0!==T&&T,I=t.autoSearch,P=void 0!==I&&I,D=t.disabledSelect,V=void 0!==D&&D,W=t.closeOnSelect,K=void 0!==W&&W,q=t.withClear,J=void 0===q||q,M=t.withBtn,Y=void 0===M||M,G=t.withDropdown,Q=void 0===G||G,U=t.withLoader,X=void 0===U||U,Z=t.disabled,$=void 0!==Z&&Z,_=t.autoFocus,ee=void 0!==_&&_,ne=t.changeDropdownPosition,te=void 0===ne||ne,re=t.placeholder,oe=void 0===re?"text...":re,ie=t.label,ce=void 0===ie?"Search":ie,ae=t.btnText,le=void 0===ae?"Search":ae,ue=t.loaderText,se=void 0===ue?"Loading":ue,de=t.noResultsText,fe=void 0===de?"No results:":de,pe=t.addClasses,ve=void 0===pe?{}:pe,he=e.useRef(null),me=e.useRef(null),ge=e.useState(y),be=ge[0],we=ge[1],ye=e.useState(""),xe=ye[0],Se=ye[1],Ee=e.useState(!1),Le=Ee[0],Re=Ee[1],ke=e.useState(!0),Ce=ke[0],Ne=ke[1],Ae=e.useState(null),Oe=Ae[0],je=Ae[1],Be=e.useState([]),ze=Be[0],He=Be[1],Te=e.useState(null),Fe=Te[0],Ie=Te[1];e.useEffect((function(){he.current&&ee&&he.current.focus()}),[]);var Pe=r({isOpenList:Ce,itemsLength:ze.length,execute:Q||te}),De=Pe.fieldRef,Ve=Pe.listRef,We=Pe.dropdownStyles;!function(n,t,r){void 0===r&&(r=!0);var o=function(e){n.current&&!n.current.contains(e.target)&&t()};e.useEffect((function(){return r&&document.addEventListener("click",o),function(){return document.removeEventListener("click",o)}}))}(me,(function(){return Ne(!1)})),e.useImperativeHandle(i,(function(){return{handleItem:function(e,n){c&&e&&Ge(e,n)}}}));var Ke=function(e,n){void 0===e&&(e=[]),N&&N(!0),Re(!0),je(null);var t=o(e.length>0?e:l,n,f,F);0===t.length&&""!==n&&je("".concat(fe,' "').concat(n,'"')),setTimeout((function(){N&&N(!1),L&&L(t),He(t),Re(!1)}),S),Ce||Ne(!0)},qe=function(e,n){var t=e.toString().split(b)[0].replace(b.trim(),"");K&&n?Ne(!1):Ke([],t)},Je=function(e){return"object"==typeof e?v.length?v.reduce((function(n,t){return void 0!==e[t]&&""!==e[t]?""===n?e[t].toString():"".concat(n).concat(b).concat(e[t].toString()):n}),""):JSON.stringify(e):e.toString()},Me=function(){return xe&&be.trim()!==xe.trim()?xe:Fe&&m?Fe[m]:be},Ye=function(e){return 0===Object.keys(ve).length||!ve[e]?"":" ".concat(ve[e])},Ge=function(e,n){k&&k(e);var t="";t=n||("object"==typeof e?Je(e):e.toString()),Ie(e),we(t),Se(t),qe(m?e[m]:t,e)},Qe=function(){H&&H(),L&&L([]),je(null),we(""),He([]),Ie(null)};return e.useEffect((function(){""!==be.trim()?(be.trim()!==xe.trim()&&(Ie(null),Se("")),P&&!Fe&&qe(Me())):Qe()}),[be,Fe]),e.createElement("div",{className:"sc-wrapper".concat(Ye("wrapper")),ref:me},ce&&e.createElement("div",{className:"sc-label".concat(Ye("label"))},e.createElement("label",{htmlFor:"searchInput"},ce)),e.createElement("form",{onSubmit:function(e){e.preventDefault(),$||qe(Me())},className:"sc-input-form".concat(Ye("inputForm"))},e.createElement("div",{className:"sc-input".concat(Ye("input")),ref:De},e.createElement("input",{type:"text",id:"searchInput",onBlur:function(){B&&B()},onFocus:function(){O&&O(),Ce||Ne(!0)},disabled:$,ref:he,placeholder:oe,value:be,onChange:function(e){return we(e.target.value)}}),J&&be&&!$&&!Le&&e.createElement("div",{onClick:Qe,className:"sc-input-clear".concat(Ye("clear"))})),!P&&Y?e.createElement("button",{"data-testid":"search-button",className:"sc-button".concat(Ye("button")),onClick:function(){return qe(Me())},disabled:Le||!be||$},X&&Le?se:le):X&&e.createElement("span",{className:"sc-loader".concat(Ye("loader"))},Le&&se)),Q&&e.createElement("div",{className:"sc-dropdown-wrapper".concat(Ye("dropdownWrapper")).concat((ze.length>0||Oe)&&Ce?" sc-dropdown--open":""),style:n({},We),ref:Ve},c?e.createElement(e.Fragment,null,c):e.createElement("div",{className:"sc-dropdown".concat(Ye("dropdown"))},Oe||ze.length>0&&ze.map((function(n,t){return e.createElement("div",{key:s&&n[s]?n[s]:t+n.toString(),className:"sc-dropdown-item".concat(V?"sc-dropdown-item--disabled":"").concat(Ye("dropdownItem")),onClick:function(){return V?function(){}:Ge(n)}},Je(n))})))))}));u.displayName="SearchCrow",exports.SearchCrow=u,exports.onSearchCrow=o;
//# sourceMappingURL=index.js.map
